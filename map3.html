<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Konum Haritası - 3 Nokta</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <style>
        body { margin: 0; padding: 0; font-family: Arial, sans-serif; }
        #map { height: 100vh; width: 100%; }
        .custom-popup { min-width: 280px; max-width: 400px; }
        .popup-title { font-weight: bold; font-size: 18px; margin-bottom: 10px; color: #10b981; }
        .popup-coords { color: #666; font-size: 12px; margin-bottom: 12px; }
        .popup-photos { display: flex; gap: 8px; margin-bottom: 12px; flex-wrap: wrap; }
        .popup-photo { width: 80px; height: 80px; border-radius: 8px; overflow: hidden; cursor: pointer; box-shadow: 0 2px 8px rgba(0,0,0,0.15); }
        .popup-photo img { width: 100%; height: 100%; object-fit: cover; }
        .popup-button { display: block; background: #667eea; color: white; padding: 8px 14px; border-radius: 5px; text-decoration: none; font-size: 13px; text-align: center; border: none; }
        .photo-modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 9999; display: none; justify-content: center; align-items: center; }
        .modal-content { position: relative; max-width: 90vw; max-height: 90vh; }
        .modal-image { max-width: 100%; max-height: 100%; object-fit: contain; border-radius: 12px; }
        .modal-close { position: absolute; top: -40px; right: 0; background: white; border: none; border-radius: 50%; width: 40px; height: 40px; font-size: 20px; cursor: pointer; }
    </style>
</head>
<body>
    <div id="map"></div>
    <div class="photo-modal" id="photoModal">
        <div class="modal-content"><button class="modal-close" id="modalCloseBtn">✕</button><img class="modal-image" id="modalImage" src=""></div>
    </div>
    <script>
        const map = L.map('map').setView([39.92, 32.85], 6);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);
        const locations = [{"lat":41.0231409,"lng":28.9779927,"name":"The Peninsula Istanbul","url":"https://www.google.com/maps/place/The+Peninsula+Istanbul/@41.0231409,28.9779927,17z/data=!4m9!3m8!1s0x14cab99991d0cb9b:0x2d35f8700a5c9161!5m2!4m1!1i2!8m2!3d41.0230125!4d28.9779274!16s%2Fg%2F11tbvb6d04?entry=ttu&g_ep=EgoyMDI1MDYwMi4wIKXMDSoASAFQAw%3D%3D","photos":["https://res.cloudinary.com/dnkrwesdr/image/upload/v1749139987/1_vmtmxh.jpg","https://res.cloudinary.com/dnkrwesdr/image/upload/v1749139987/2_q87sh0.jpg","https://res.cloudinary.com/dnkrwesdr/image/upload/v1749139988/3_kgnzpa.jpg"]},{"lat":41.1356459,"lng":28.7620189,"name":"Şamlar Tabiat Parkı","url":"https://www.google.com/maps/place/%C5%9Eamlar+Nature+Park/@41.1356459,28.7620189,17z/data=!4m6!3m5!1s0x14caa92dc2af299d:0xc8698d4f49416a77!8m2!3d41.1356459!4d28.7620189!16s%2Fg%2F1w9p5dq7?entry=ttu&g_ep=EgoyMDI1MDYwMi4wIKXMDSoASAFQAw%3D%3D","photos":["https://res.cloudinary.com/dnkrwesdr/image/upload/v1749137810/1_ntpwbw.jpg","https://res.cloudinary.com/dnkrwesdr/image/upload/v1749137810/2_ypwmf5.jpg","https://res.cloudinary.com/dnkrwesdr/image/upload/v1749137810/3_ustra5.jpg"]},{"lat":41.1417792,"lng":29.8735867,"name":"Ağva Kilimli Kayalıklar","url":"https://www.google.com/maps/place/A%C4%9Fva+Kilimli+Cliffs/@41.1417792,29.8735867,18z/data=!4m14!1m7!3m6!1s0x409e3bf088bc8283:0x4cd480de847530d8!2sAgva+Kilimli+Bay!8m2!3d41.141991!4d29.8726855!16s%2Fg%2F11fx950yb5!3m5!1s0x409e3bf099e203df:0xa7c059899795c389!8m2!3d41.1417792!4d29.8735867!16s%2Fg%2F11fy4298s6?entry=ttu&g_ep=EgoyMDI1MDYwMi4wIKXMDSoASAFQAw%3D%3D","photos":["https://res.cloudinary.com/din1xe7cr/image/upload/v1749123875/image_2_xqokgv.jpg","https://res.cloudinary.com/din1xe7cr/image/upload/v1749123875/1_doup2q.jpg","https://res.cloudinary.com/din1xe7cr/image/upload/v1749123876/photo_2025-06-05_14-37-20_khiyos.jpg"]}];
        const markers = [];
        
        function openPhotoModal(url) {
            document.getElementById('modalImage').src = url;
            document.getElementById('photoModal').style.display = 'flex';
        }
        function closePhotoModal() {
            document.getElementById('photoModal').style.display = 'none';
        }
        document.getElementById('photoModal').addEventListener('click', closePhotoModal);
        document.getElementById('modalCloseBtn').addEventListener('click', closePhotoModal);
        document.addEventListener('keydown', (e) => e.key === 'Escape' && closePhotoModal());

        locations.forEach(loc => {
            let photosHtml = '';
            if (loc.photos && loc.photos.length > 0) {
                photosHtml = '<div class="popup-photos">';
                loc.photos.forEach(photo => {
                    photosHtml += `<div class="popup-photo" onclick="openPhotoModal('${photo}')"><img src="${photo}" alt="${loc.name}"></div>`;
                });
                photosHtml += '</div>';
            }
            const popupContent = `<div class="custom-popup"><div class="popup-title">${loc.name}</div><div class="popup-coords">Lat: ${loc.lat.toFixed(6)}<br>Lng: ${loc.lng.toFixed(6)}</div>${photosHtml}<a href="${loc.url}" target="_blank" class="popup-button">Google Maps'te Aç</a></div>`;
            const marker = L.circleMarker([loc.lat, loc.lng], { radius: 8, fillColor: '#ff4444', color: '#fff', weight: 2, fillOpacity: 0.8 }).bindPopup(popupContent).addTo(map);
            markers.push(marker);
        });
        if (markers.length > 0) {
            map.fitBounds(L.featureGroup(markers).getBounds().pad(0.1));
        }
    </script>
</body>
</html>
